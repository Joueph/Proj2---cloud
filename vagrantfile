# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|
  # Define a imagem da VM a ser usada. O Ubuntu 20.04 (Focal) é uma escolha estável.
  config.vm.box = "ubuntu/focal64"

  # Configuração da rede: Redireciona a porta 8080 da sua máquina para a porta 80 da VM (Apache)
  config.vm.network "forwarded_port", guest: 80, host: 8080

  # Configuração de hardware para VirtualBox.
  config.vm.provider "virtualbox" do |vb|
    vb.memory = "4096" # 4096MB de Memória RAM
    vb.cpus = "2"      # 2 Cores de CPU
  end


  # Mapeia a pasta 'src' do seu projeto para '/var/www/html' na VM.
  # Isso permite que você edite os arquivos na sua máquina e veja as alterações na web instantaneamente.
  config.vm.synced_folder "src/", "/var/www/html"

  # Mapeia a pasta 'logs' para '/var/www/logs' na VM para fácil acesso.
  config.vm.synced_folder "logs/", "/var/www/logs"

  # Executa o script de provisionamento para instalar e configurar o ambiente.
  # Este script só roda na primeira vez que você executa `vagrant up` ou com `vagrant provision`.
  config.vm.provision "shell", path: "scripts/bootstrap.sh"
end
